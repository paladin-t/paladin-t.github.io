{"mappings":"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","sources":["<anon>","src/search.js"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequirede9e\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequirede9e\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $8CS99 = parcelRequire(\"8CS99\");\nlet $a8d410f20eeaeb6d$var$params = new URLSearchParams(window.location.search);\nlet $a8d410f20eeaeb6d$var$query = $a8d410f20eeaeb6d$var$params.get('s')?.toLowerCase() || '';\ndocument.getElementById('global-search').value = $a8d410f20eeaeb6d$var$query;\nif ($a8d410f20eeaeb6d$var$query) $a8d410f20eeaeb6d$var$performSearch($a8d410f20eeaeb6d$var$query);\nasync function $a8d410f20eeaeb6d$var$performSearch(query) {\n    const resultsContainer = document.getElementById('search-results');\n    const loadingElement = document.getElementById('search-loading');\n    const results = [];\n    loadingElement.style.display = 'block';\n    const children = Array.from(resultsContainer.children);\n    for (const child of children)if (child != loadingElement) resultsContainer.removeChild(child);\n    const savedTheme = localStorage.getItem('theme');\n    for (const article of (0, $8CS99.Articles))try {\n        const lang = document.querySelector('meta[name=\"document-lang\"]')?.getAttribute('content') || 'en';\n        const name = article.name;\n        const path = `${lang}/${name}.md`;\n        const response = await fetch(path);\n        if (!response.ok) continue;\n        const text = await response.text();\n        const excerpt = $a8d410f20eeaeb6d$var$getSearchExcerpt(text, query);\n        if (excerpt) results.push({\n            title: article.title,\n            name: article.name,\n            excerpt: excerpt\n        });\n        if (excerpt && resultsContainer) {\n            const resultItem = document.createElement('div');\n            resultItem.className = 'search-result-item';\n            resultItem.innerHTML = `\n          <div class=\"search-result-title\">\n            <a href=\"${article.name}.html?s=${encodeURIComponent(query)}\">${article.title}</a>\n          </div>\n          <div class=\"search-result-excerpt\">${excerpt}</div>\n        `;\n            if (savedTheme == 'dark') resultItem.classList.add('dark-mode');\n            resultsContainer.appendChild(resultItem);\n        }\n    } catch (error) {\n        console.error(`Error fetching ${article.name}.md:`, error);\n    }\n    loadingElement.style.display = 'none';\n    $a8d410f20eeaeb6d$var$displaySummary(results, query);\n}\nfunction $a8d410f20eeaeb6d$var$getSearchExcerpt(text, query) {\n    // Escape special characters of regex.\n    function escapeRegExp(string) {\n        return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    }\n    // Remove html labels and trival markdown formats.\n    const strippedText = text.replace(/<[^>]*>/g, '') // Remove HTML labels.\n    .replace(/\\[\\s*(?:Prev|Next)(?::[^\\]]*)?\\]\\([^)]*\\)\\s*/gi, ''); // Remove navigation links: [Prev](), [Next](), etc.\n    // Remove markdown formats.\n    const plainText = strippedText.replace(/#+\\s/g, '') // Remove title.\n    .replace(/!?\\[([^\\]]*)\\]\\([^)]*\\)/g, '$1') // Remove link and image.\n    .replace(/\\*\\*([^*]+)\\*\\*/g, '$1') // Remove bold.\n    .replace(/\\*([^*]+)\\*/g, '$1') // Remove italic.\n    .replace(/`([^`]+)`/g, '$1') // Remove code.\n    .replace(/\\|[-:\\s|]*\\|/g, ' ') // Remove table separator lines\n    //.replace(/\\s*\\|\\s*/g, ' ')                                      // Remove table pipes and normalize spaces\n    .replace(/\\s+/g, ' '); // Collapse multiple spaces\n    const index = plainText.toLowerCase().indexOf(query.toLowerCase());\n    if (index == -1) return null;\n    const start = Math.max(0, index - 50);\n    const end = Math.min(plainText.length, index + query.length + 100);\n    let excerpt = plainText.substring(start, end);\n    // Highlight matches.\n    const regex = new RegExp(`(${escapeRegExp(query)})`, 'gi');\n    excerpt = excerpt.replace(regex, '<span class=\"highlight\">$1</span>');\n    return (start > 0 ? '...' : '') + excerpt + (end < plainText.length ? '...' : '');\n}\nfunction $a8d410f20eeaeb6d$var$displaySummary(results, query) {\n    const resultsCount = document.createElement('div');\n    resultsCount.className = 'search-result-count';\n    const resultsContainer = document.getElementById('search-results');\n    const firstResult = resultsContainer.querySelector('.search-result-item');\n    if (firstResult) resultsContainer.insertBefore(resultsCount, firstResult);\n    else resultsContainer.appendChild(resultsCount);\n    if (results.length == 0) {\n        resultsCount.innerHTML = `No results found for \"${query}\"`;\n        return;\n    }\n    if (results.length == 1) resultsCount.innerHTML = `Found ${results.length} page:`;\n    else resultsCount.innerHTML = `Found ${results.length} pages:`;\n}\n// Setup search input behaviour.\nfunction $a8d410f20eeaeb6d$var$setupSearch() {\n    const globalSearch = document.getElementById('global-search');\n    document.addEventListener('keydown', (e)=>{\n        if (e.key == '/' && !e.target.matches('input, textarea')) {\n            e.preventDefault();\n            globalSearch.focus();\n        }\n    });\n    function debounce(func, wait) {\n        let timeout;\n        return (...args)=>{\n            const later = ()=>{\n                clearTimeout(timeout);\n                func(...args);\n            };\n            clearTimeout(timeout);\n            timeout = setTimeout(later, wait);\n        };\n    }\n    globalSearch.addEventListener('input', debounce((e)=>{\n        const query = e.target.value.trim();\n        if (query) {\n            window.history.replaceState(null, '', `search.html?s=${encodeURIComponent(query)}`);\n            $a8d410f20eeaeb6d$var$performSearch(query);\n        }\n    }, 300));\n    window.addEventListener('popstate', (e)=>{\n        let params = new URLSearchParams(window.location.search);\n        let query = params.get('s')?.toLowerCase() || '';\n        if (query) $a8d410f20eeaeb6d$var$performSearch(query);\n    });\n}\n$a8d410f20eeaeb6d$var$setupSearch();\n\n\n//# sourceMappingURL=search.c6d4611f.js.map\n","import { Articles } from './articles.js';\r\n\r\nlet params = new URLSearchParams(window.location.search);\r\nlet query = params.get('s')?.toLowerCase() || '';\r\n\r\ndocument.getElementById('global-search').value = query;\r\n\r\nif (query)\r\n  performSearch(query);\r\n\r\nasync function performSearch(query) {\r\n  const resultsContainer = document.getElementById('search-results');\r\n  const loadingElement = document.getElementById('search-loading');\r\n\r\n  const results = [ ];\r\n  loadingElement.style.display = 'block';\r\n  const children = Array.from(resultsContainer.children);\r\n  for (const child of children) {\r\n    if (child != loadingElement)\r\n      resultsContainer.removeChild(child);\r\n  }\r\n\r\n  const savedTheme = localStorage.getItem('theme');\r\n\r\n  for (const article of Articles) {\r\n    try {\r\n      const lang = document.querySelector('meta[name=\"document-lang\"]')?.getAttribute('content') || 'en';\r\n      const name = article.name;\r\n      const path = `${lang}/${name}.md`;\r\n\r\n      const response = await fetch(path);\r\n      if (!response.ok)\r\n        continue;\r\n\r\n      const text = await response.text();\r\n      const excerpt = getSearchExcerpt(text, query);\r\n\r\n      if (excerpt) {\r\n        results.push({\r\n          title: article.title,\r\n          name: article.name,\r\n          excerpt\r\n        });\r\n      }\r\n      if (excerpt && resultsContainer) {\r\n        const resultItem = document.createElement('div');\r\n        resultItem.className = 'search-result-item';\r\n        resultItem.innerHTML = `\r\n          <div class=\"search-result-title\">\r\n            <a href=\"${article.name}.html?s=${encodeURIComponent(query)}\">${article.title}</a>\r\n          </div>\r\n          <div class=\"search-result-excerpt\">${excerpt}</div>\r\n        `;\r\n        if (savedTheme == 'dark') {\r\n          resultItem.classList.add('dark-mode');\r\n        }\r\n        resultsContainer.appendChild(resultItem);\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error fetching ${article.name}.md:`, error);\r\n    }\r\n  }\r\n\r\n  loadingElement.style.display = 'none';\r\n  displaySummary(results, query);\r\n}\r\n\r\nfunction getSearchExcerpt(text, query) {\r\n  // Escape special characters of regex.\r\n  function escapeRegExp(string) {\r\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\r\n  }\r\n\r\n  // Remove html labels and trival markdown formats.\r\n  const strippedText = text\r\n    .replace(/<[^>]*>/g, '')                                        // Remove HTML labels.\r\n    .replace(/\\[\\s*(?:Prev|Next)(?::[^\\]]*)?\\]\\([^)]*\\)\\s*/gi, ''); // Remove navigation links: [Prev](), [Next](), etc.\r\n\r\n  // Remove markdown formats.\r\n  const plainText = strippedText\r\n    .replace(/#+\\s/g, '')                                           // Remove title.\r\n    .replace(/!?\\[([^\\]]*)\\]\\([^)]*\\)/g, '$1')                      // Remove link and image.\r\n    .replace(/\\*\\*([^*]+)\\*\\*/g, '$1')                              // Remove bold.\r\n    .replace(/\\*([^*]+)\\*/g, '$1')                                  // Remove italic.\r\n    .replace(/`([^`]+)`/g, '$1')                                    // Remove code.\r\n    .replace(/\\|[-:\\s|]*\\|/g, ' ')                                  // Remove table separator lines\r\n    //.replace(/\\s*\\|\\s*/g, ' ')                                      // Remove table pipes and normalize spaces\r\n    .replace(/\\s+/g, ' ');                                          // Collapse multiple spaces\r\n\r\n  const index = plainText.toLowerCase().indexOf(query.toLowerCase());\r\n  if (index == -1)\r\n    return null;\r\n\r\n  const start = Math.max(0, index - 50);\r\n  const end = Math.min(plainText.length, index + query.length + 100);\r\n  let excerpt = plainText.substring(start, end);\r\n\r\n  // Highlight matches.\r\n  const regex = new RegExp(`(${escapeRegExp(query)})`, 'gi');\r\n  excerpt = excerpt.replace(regex, '<span class=\"highlight\">$1</span>');\r\n\r\n  return (start > 0 ? '...' : '') + excerpt + (end < plainText.length ? '...' : '');\r\n}\r\n\r\nfunction displaySummary(results, query) {\r\n  const resultsCount = document.createElement('div');\r\n  resultsCount.className = 'search-result-count';\r\n\r\n  const resultsContainer = document.getElementById('search-results');\r\n  const firstResult = resultsContainer.querySelector('.search-result-item');\r\n  if (firstResult)\r\n    resultsContainer.insertBefore(resultsCount, firstResult);\r\n  else\r\n    resultsContainer.appendChild(resultsCount);\r\n\r\n  if (results.length == 0) {\r\n    resultsCount.innerHTML = `No results found for \"${query}\"`;\r\n\r\n    return;\r\n  }\r\n\r\n  if (results.length == 1)\r\n    resultsCount.innerHTML = `Found ${results.length} page:`;\r\n  else\r\n    resultsCount.innerHTML = `Found ${results.length} pages:`;\r\n}\r\n\r\n// Setup search input behaviour.\r\nfunction setupSearch() {\r\n  const globalSearch = document.getElementById('global-search');\r\n\r\n  document.addEventListener('keydown', (e) => {\r\n    if (e.key == '/' && !e.target.matches('input, textarea')) {\r\n      e.preventDefault();\r\n      globalSearch.focus();\r\n    }\r\n  });\r\n\r\n  function debounce(func, wait) {\r\n    let timeout;\r\n\r\n    return (...args) => {\r\n      const later = () => {\r\n        clearTimeout(timeout);\r\n        func(...args);\r\n      };\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(later, wait);\r\n    };\r\n  }\r\n\r\n  globalSearch.addEventListener('input', debounce((e) => {\r\n    const query = e.target.value.trim();\r\n    if (query) {\r\n      window.history.replaceState(null, '', `search.html?s=${encodeURIComponent(query)}`);\r\n      performSearch(query);\r\n    }\r\n  }, 300));\r\n\r\n  window.addEventListener('popstate', (e) => {\r\n    let params = new URLSearchParams(window.location.search);\r\n    let query = params.get('s')?.toLowerCase() || '';\r\n    if (query)\r\n      performSearch(query);\r\n  });\r\n}\r\nsetupSearch();\r\n"],"names":["timeout","func","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$8CS99","$a8d410f20eeaeb6d$var$params","URLSearchParams","window","location","search","$a8d410f20eeaeb6d$var$query","get","toLowerCase","$a8d410f20eeaeb6d$var$performSearch","query","resultsContainer","document","getElementById","loadingElement","results","child","style","display","Array","from","children","removeChild","savedTheme","localStorage","getItem","article","Articles","lang","querySelector","getAttribute","name","path","response","fetch","ok","text","excerpt","$a8d410f20eeaeb6d$var$getSearchExcerpt","plainText","strippedText","replace","index","indexOf","start","Math","max","end","min","length","substring","regex","RegExp","string","push","title","resultItem","createElement","className","innerHTML","encodeURIComponent","classList","add","appendChild","error","console","$a8d410f20eeaeb6d$var$displaySummary","resultsCount","firstResult","insertBefore","value","globalSearch","addEventListener","e","key","target","matches","preventDefault","focus","trim","history","replaceState","args","clearTimeout","setTimeout","params"],"version":3,"file":"search.c6d4611f.js.map"}